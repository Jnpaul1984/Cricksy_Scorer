{
  "family": "cricksy-ml-training",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "2048",
  "memory": "4096",
  "taskRoleArn": "arn:aws:iam::365183982031:role/cricksy-ecs-task-role",
  "executionRoleArn": "arn:aws:iam::365183982031:role/cricksy-ecs-execution-role",
  "containerDefinitions": [
    {
      "name": "ml-trainer",
      "image": "365183982031.dkr.ecr.us-east-1.amazonaws.com/cricksy-backend:latest",
      "command": [
        "/bin/bash",
        "-c",
        "set -e && echo '[1/4] Exporting training data...' && python -m backend.scripts.export_training_data && echo '[2/4] Training T20 models...' && python -m backend.train_win_predictors t20 && python -m backend.train_score_predictors t20 && echo '[3/4] Training ODI models...' && python -m backend.train_win_predictors odi && python -m backend.train_score_predictors odi && echo '[4/4] Verifying models...' && python -m backend.verify_all_models && echo 'βœ… Training complete!'"
      ],
      "environment": [
        {
          "name": "DATABASE_URL",
          "value": "postgresql+asyncpg://PLACEHOLDER_UPDATE_THIS@cricksy-db.cxxxxx.us-east-1.rds.amazonaws.com:5432/cricksy"
        },
        {
          "name": "S3_MODEL_BUCKET",
          "value": "cricksy-ml-models"
        },
        {
          "name": "S3_MODEL_PREFIX",
          "value": "models"
        },
        {
          "name": "PYTHONPATH",
          "value": "/app"
        },
        {
          "name": "LOG_LEVEL",
          "value": "INFO"
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/cricksy-ai/ml-training",
          "awslogs-region": "us-east-1",
          "awslogs-stream-prefix": "training",
          "awslogs-create-group": "true"
        }
      },
      "essential": true
    }
  ]
}
